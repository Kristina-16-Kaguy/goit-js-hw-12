{"version":3,"file":"index.js","sources":["../src/js/iziToastHelper.js","../src/js/pixabay-api.js","../src/js/refs.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function showError(message) {\n  iziToast.error({\n    message: message,\n    position: 'topRight',\n  });\n}\n\nexport function showInfo(message) {\n  iziToast.info({\n    message: message,\n    position: 'topRight',\n  });\n}\n","import axios from 'axios';\nimport { showError, showInfo } from './iziToastHelper.js';\n\nconst API_KEY = '52515106-cf2fe0ed90e49660ada5f5535';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst per_page = 15;\n\nexport async function getImagesByQuery(query, page) {\n  try {\n    let response = await axios.get(BASE_URL, getParams(query, page));\n    const images = response.data.hits;\n    const totalHits = response.data.totalHits;\n\n    if (!images || !images.length) {\n      showError(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      return { images: [], isLastPage: true };\n    }\n\n    if (isLastPage(totalHits, page)) {\n      showInfo(\"We're sorry, but you've reached the end of search results\");\n      return { images: images, isLastPage: true };\n    } else {\n      return { images: images, isLastPage: false };\n    }\n  } catch (error) {\n    showError(error.message);\n    return { images: [], isLastPage: true };\n  }\n}\n\nfunction getParams(query, page) {\n  return {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: per_page,\n      page: page,\n    },\n  };\n}\n\nfunction isLastPage(totalHits, page) {\n  let totalPages = Math.ceil(totalHits / per_page);\n  return page >= totalPages;\n}\n","export const refs = {\n  form: document.querySelector('.form'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  LoadMoreBtn: document.querySelector('.load-more'),\n  get galleryItem() {\n    return document.querySelector('.gallery-item');\n  },\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { refs } from './refs.js';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function createGallery(images) {\n  const markup = images\n    .map(\n      image =>\n        `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"gallery-img\">\n          </a>\n          <ul class=\"img-footer\">\n            <li class=\"img-footer-item\">\n              <h3 class=\"meta-header\">Likes</h3>\n              <p class=\"meta-info\">${image.likes}</p>\n            </li>\n            <li class=\"img-footer-item\">\n              <h3 class=\"meta-header\">Views</h3>\n              <p class=\"meta-info\">${image.views}</p>\n            </li>\n            <li class=\"img-footer-item\">\n              <h3 class=\"meta-header\">Comments</h3>\n              <p class=\"meta-info\">${image.comments}</p>\n            </li>\n            <li class=\"img-footer-item\">\n              <h3 class=\"meta-header\">Downloads</h3>\n              <p class=\"meta-info\">${image.downloads}</p>\n            </li>\n           </ul>\n       </li>`\n    )\n    .join('');\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  refs.gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n  refs.loader.classList.add('is-visible');\n}\n\nexport function hideLoader() {\n  refs.loader.classList.remove('is-visible');\n}\n\nexport function showLoadMoreButton() {\n  refs.LoadMoreBtn.classList.add('is-visible');\n}\n\nexport function hideLoadMoreButton() {\n  refs.LoadMoreBtn.classList.remove('is-visible');\n}\n\nexport function scrollBy() {\n  let heigth = refs.galleryItem.getBoundingClientRect().height;\n  window.scrollBy({\n    top: heigth * 2,\n    behavior: 'smooth',\n  });\n}\n","import { getImagesByQuery } from './js/pixabay-api.js';\nimport {\n  clearGallery,\n  createGallery,\n  hideLoader,\n  showLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  scrollBy,\n} from './js/render-functions.js';\nimport { refs } from './js/refs.js';\nimport { showError } from './js/iziToastHelper.js';\n\nlet page = 1;\nlet inputValue;\n\nrefs.form.addEventListener('submit', async event => {\n  event.preventDefault();\n  inputValue = event.target.elements['search-text'].value.trim();\n  if (!inputValue) {\n    showError('Insert your request!');\n    return;\n  }\n\n  clearGallery();\n  hideLoadMoreButton();\n  page = 1;\n  showLoader();\n\n  try {\n    let { images, isLastPage } = await getImagesByQuery(inputValue, page++);\n    createGallery(images);\n    if (!isLastPage) {\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    showError(error.message);\n  }\n  hideLoader();\n});\n\nrefs.LoadMoreBtn.addEventListener('click', async () => {\n  // page++;\n  hideLoadMoreButton();\n  showLoader();\n\n  try {\n    let { images, isLastPage } = await getImagesByQuery(inputValue, page++);\n    createGallery(images);\n    scrollBy();\n    if (!isLastPage) {\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    showError(error.message);\n  }\n  hideLoader();\n});\n"],"names":["showError","message","iziToast","showInfo","API_KEY","BASE_URL","per_page","getImagesByQuery","query","page","response","axios","getParams","images","totalHits","isLastPage","error","totalPages","refs","lightbox","SimpleLightbox","createGallery","markup","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","scrollBy","heigth","inputValue","event"],"mappings":"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"}